{% extends 'app/layout.html' %}
{% block content %}
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta name="viewport" content="width-device-width, intial-scale=1" />
</head>
<body>
<style>
    dropbtn {
         background-color: #4CAF50;
         color: white;
         padding: 16px;
         font-size: 16px;
         border: none;
         cursor: pointer;
    }
    .dropbtn:hover, .dropbtn:focus {
            background-color: #3e8e41;
    }
    #myInput {
  box-sizing: border-box;
  background-image: url('searchicon.png');
  background-position: 14px 12px;
  background-repeat: no-repeat;
  font-size: 16px;
  padding: 14px 20px 12px 45px;
  border: none;
  border-bottom: 1px solid #ddd;
}

#myInput:focus {outline: 3px solid #ddd;}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f6f6f6;
  min-width: 230px;
  overflow: auto;
  border: 1px solid #ddd;
  z-index: 1;
}

.dropdown-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.dropdown a:hover {background-color: #ddd;}

.show {display: block;}
    table {
        font-family: helvetica;
        height: 57px;
        width: 1212px;
        left: 145px;
        top: 407px;
        border-radius: 0px;
        border: 1px solid #ECF5F9;
        box-sizing: border-box;

    }
    tr:nth-child(even) {
        background-color: #EEE5C4;

    }
    tr:nth-child(odd) {
        background-color: #C4E2EE;

    }

    th, td {
  text-align: left;
  padding: 25px;
}
    ul {
        list-style-type: none;
    }
</style>


<div class=" filters">
    <div class="filter1">
           <form method="get" id="filterForm">
                {{myFilter1.form}}
                {{myFilter2.form}}
                <button class="btn btn-primary" type="submit">
                Search</button>
            </form>
    </div>
</div>
<div class="dropdown">
  <button onclick="myFunction()" class="dropbtn">Dropdown</button>
  <div id="myDropdown" class="dropdown-content">
    <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
    {% for directory in directories %}
              {% for article in directory.dir_articles.all %}
                    <a href=" = "{{article.article_content}}">{{article.article_name}}</a>
              {% endfor %}

              {% for service in directory.dir_services.all %}
                  {% for serv in services %}
                     {% if serv == service %}
                        <a href= "{{service.service_url}}">{{service.service_name}}</a>
                      {% endif %}
                  {% endfor %}
              {% endfor %}
          {% endfor %}
   </div>
</div>

<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */


    $(document).ready(function () {

   // $('myfilter1').bind('change', function(event) {
     //   $('serviceFilter').trigger("submit");
   // });
    console.log("registered checkbox listener.");
   $("form input:checkbox").click(function() {
      $("#filterForm").submit();
        });
    });







function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  div = document.getElementById("myDropdown");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}
</script>

<h2>Article List</h2>
<p>Articles: <br /></p>
    <table>
            <tr>
                <th>Article Name</th>
                <th>Category</th>
                <th> View detail</th>
                <th> Visit Site</th>
                <th> Contact info</th>
                
            </tr>
    

            {% for directory in directories %}
                {% for article in directory.dir_articles.all %}
                <tr>
                <td>{{article.article_name}}</td>
                <td>{{directory.dir_name}}</td>
                <td> View detail</td>
                <td><a href= "{{article.article_content}}">Visit Site</a></td>
                <td> Contact info</td>
             
        
                </tr>
                {% endfor %}

                {% for service in directory.dir_services.all %}
                    {% for serv in services %}
                       {% if serv == service %}

                        <tr>
                        <td>{{service.service_name}}</td>
                        <td>{{directory.dir_name}}</td>
                        <td> View detail</td>
                        <td><a href= "{{service.service_url}}">Visit Site</a></td>
                        <td> Contact info</td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                {% endfor %}
            {% endfor %}
             </table>
    </body>
{% endblock %}
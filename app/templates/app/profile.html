﻿<!--
    profile.html
    
    This is the user profile page
-->
{% load static %}
{% load project_templates %}
{% block content %}
{% if user.is_authenticated %}
<head>
	<link rel="stylesheet" type="text/css" href="{% static 'app/content/profile.css' %}"/>
	<link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" type="text/css" rel="stylesheet">
	<script src="{% static 'app/scripts/jquery.js' %}"></script>
	<script src="{% static 'app/scripts/main.js' %}"></script>
	<script src="{% static 'app/scripts/format.js' %}"></script>
</head>
<ul class="nav navbar-nav">
    <li><a href="{% url 'dashboard' %}">Home</a></li>
    <li><a href="{% url 'userinfo' %}">User Info Form</a></li>
</ul>
<body>
	<div class="sidebar">


		<div class="sidebar-menu">
			<ul>
				<li>
					<a href="{% url 'dashboard' %}" class="active">
						<span id="fist-element" class="las la-home"></span>
					</a>
				</li>
				<li>
					<a href="{% url 'fulldirectory' %}">
						<span class="las la-book"></span>
					</a>
				</li>
				<li>
					<a href="{% url 'multichat' %}">
						<span class="las la-comment-alt"></span>
					</a>
				</li>
				<li>
					<a href="">
						<span class="las la-user-friends"></span>
					</a>
				</li>
				<li>
				  <a href="">
					  <span class="las la-plus-circle"></span>
				  </a>
			  </li>
			</ul>
		</div>
	  </div>
	  
	  
	  
	  <header class="dash-header">
	  
		<div class="sidebar-header">
			<span id="sidebar-toggle" class="las la-bars"></span>
		</div>
	  <div id="leftside">
		<div class="search-wrapper">
			<span class="las la-search"></span>
			<input type="search" placeholder="Search here" />
		</div>
		<div class="vl"></div>
		  <div class="dropdown">
			<div class="user-wrapper">
			  <div class="user-wrapper">
          <a href="{% url 'profile' %}"><div class="profile-pic-wrapper" data-username="{{user.username}}" data-bgcolor="{{user.bgColor}}">
            {% if user.avatar %}
            <img class="profile-pic" src="{{user.avatar.url}}">
            {% endif %}
          </div></a>
				  <i id="caret-icon" style=font-size:25px;color:white;float:right; class="las la-angle-down"></i>
				<div class="dropdown-content">
            <div id="usermenu">
            {% if user.id in userlist %}
                {% for back in background %}
                    {% if back.user_id == user.id %}
                        <h3>{{ back.firstname }} {{ back.lastname }}</h3>
                    {% endif %}
                {% endfor %}
            {% else %}
                <h3>{{ user.username }}</h3>
            {% endif %}
			{% if request.user|has_group:"caseworker" %}
                <h4>Caseworker</h4>
            {% elif request.user|has_group:"client" %}
                <h4>Client</h4>
            {% else %}
                <h4>Not implemented</h4>
            {% endif %}
            </div>
            <a href="{% url 'logout' %}">Log out</a>
          </div>
			</div>
		</div>
	  </div>
	  </header>
	  
	<div class="container">
		<div id="profile">
			{% if user.avatar %}
            <img src="{{user.avatar.url}}" class="profilePic" alt="default profile picture">
			{% else %}
			<img src="{% static 'app/content/Deafult-Profile-Picture.png' %}" class="profilePic" alt="default profile picture"/>
            {% endif %}
			<p class="name"> {{ object1.firstname }} {{ object1.lastname }} </p>
			<p class="email">{{ object1.email }}</p>
			<div class="tags">
				<p class="profileTags"> Housing Assistance </p>
				<p class="profileTags"> Senior </p>
			</div>
			<hr />
			<button class="button profileButton"> SEND MESSAGE </button>
		</div>
		<div id="personalInfo">
			<div class="piContainer">
				<div id="gender">
					<p class="personalTitle"> Gender </p>
					<p class="info"> {{ object1.gender }} </p>
				</div>
				<div id="street">
					<p class="personalTitle"> Street Address </p>
					<p class="info"> {{ object3.street_address }} </p>
				</div>
				<div id="status"> 
					<p class="personalTitle"> Member Status </p>
					<p class="info"> Active Member </p>
				</div>
				<div id="bday"> 
					<p class="personalTitle"> Birthday </p>
					<p class="info"> {{ object1.birthday }} </p>
				</div>
				<div id="city">
					<p class="personalTitle"> City </p>
					<p class="info"> {{ object3.city }} </p>
				</div>
				<div id="rdate">
					<p class="personalTitle"> Registered Date </p>
					<p class="info"> {{ date_joined|date:"F d, Y" }}</p>
				</div>
				<div id="phone"> 
					<p class="personalTitle"> Phone Number </p>
					<p class="info"> {{ object1.phone_number }} </p>
				</div>
				<div id="zip"> 
					<p class="personalTitle"> ZIP Code </p>
					<p class="info"> {{ object3.zipcode }} </p>
				</div>
			</div>
		</div>
		<div id="notes">
			<h1 class="notes"> Notes </h1>
			<div id="notesBox">
				<p class="notesBox">
					{{ object4.notes }}
				</p>
			</div>	
			<p class="notesDescription">
				Basic Activity and Community Needs
			</p>
			<div class="notesDetails">
				<p class="notesAuthor"> Kathy, 211 Case Manager </p>
				<p class="notesDate"> October 12, 2020 </p>
			</div>			
			
		</div>
		<div id="info">
			<div id="infoBox">
				<button class="tablink" onclick="openPage('upcoming', this, 'white')">Upcoming Appointments</button>
				<button class="tablink" onclick="openPage('past', this, 'white')">Past Appointments</button>
				<button class="tablink" onclick="openPage('referrals', this, 'white')" id="defaultOpen">Service Referrals</button>
				<button class="tablink" onclick="openPage('records', this, 'white')">Medical Records</button>

				<div id="upcoming" class="tabcontent">
					<p>This tab is for upcoming appointments!</p>
				</div>

				<div id="past" class="tabcontent">
					<p>This tab is for past appointments!</p>
				</div>

				<div id="referrals" class="tabcontent">
					<p>This tab is for service referrals!</p>
				</div>

				<div id="records" class="tabcontent">
					<p>This tab is for medical records!</p>
					</div>
					
					<script>
					function openPage(pageName,elmnt,color) {
					var i, tabcontent, tablinks;
					tabcontent = document.getElementsByClassName("tabcontent");
					for (i = 0; i < tabcontent.length; i++) {
						tabcontent[i].style.display = "none";
					}
					tablinks = document.getElementsByClassName("tablink");
					for (i = 0; i < tablinks.length; i++) {
						tablinks[i].style.backgroundColor = "";
					}
					document.getElementById(pageName).style.display = "block";
					elmnt.style.backgroundColor = color;
					}

					// Get the element with id="defaultOpen" and click on it
					document.getElementById("defaultOpen").click();
					</script>
			</div>
		</div>
		<div id="resources">
		{% block uploadContent %}	
			<h1 class="resources"> Resources / Documents </h1>
			<form method="post" enctype="multipart/form-data">
				{% csrf_token %}
				<input type="file" name="document">
				<button type="submit">Upload file</button>
			  </form>
			  {% if url %}
				<p>Uploaded file: <a href="{{ url }}">{{ url }}</a></p>
			  {% endif %}
		{% endblock %}
		</div>
	</div>

</body>

{% else %}

 <p>Not signed in!</p>


{% endif %}
{% endblock %}